<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APS - Sistema de Precificação</title>
    <link rel="stylesheet" href="src/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3>Carregando APS...</h3>
            <p>Sistema de Precificação para Pizzarias</p>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-pizza-slice"></i>
                <span>APS - Sistema de Precificação</span>
            </div>
            <div class="header-actions">
                <button class="btn-sync" id="syncBtn">
                    <i class="fas fa-sync-alt"></i>
                    Sincronizar
                </button>
                <div class="user-menu">
                    <i class="fas fa-user-circle"></i>
                    <span>Usuário</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h4>Cadastros</h4>
                    <ul>
                        <li>
                            <a href="#" class="nav-link active" data-section="ingredientes">
                                <i class="fas fa-leaf"></i>
                                <span>Ingredientes</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="nav-link" data-section="receitas">
                                <i class="fas fa-book"></i>
                                <span>Receitas Base</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="nav-link" data-section="pizzas">
                                <i class="fas fa-pizza-slice"></i>
                                <span>Cardápio</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h4>Custos</h4>
                    <ul>
                        <li>
                            <a href="#" class="nav-link" data-section="custos-fixos">
                                <i class="fas fa-building"></i>
                                <span>Custos Fixos</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="nav-link" data-section="custos-variaveis">
                                <i class="fas fa-chart-line"></i>
                                <span>Custos Variáveis</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="nav-link" data-section="impostos">
                                <i class="fas fa-percentage"></i>
                                <span>Impostos & Taxas</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h4>Precificação</h4>
                    <ul>
                        <li>
                            <a href="#" class="nav-link" data-section="precos">
                                <i class="fas fa-tags"></i>
                                <span>Preços Finais</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="nav-link" data-section="simulador">
                                <i class="fas fa-calculator"></i>
                                <span>Simulador</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <div class="nav-section">
                    <h4>Análises</h4>
                    <ul>
                        <li>
                            <a href="#" class="nav-link" data-section="dashboard">
                                <i class="fas fa-chart-pie"></i>
                                <span>Dashboard</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="nav-link" data-section="relatorios">
                                <i class="fas fa-file-alt"></i>
                                <span>Relatórios</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Ingredientes Section -->
            <section id="ingredientes-section" class="content-section active">
                <div class="section-header">
                    <h2>
                        <i class="fas fa-leaf"></i>
                        Gestão de Ingredientes
                    </h2>
                    <button class="btn-primary" id="addIngredienteBtn">
                        <i class="fas fa-plus"></i>
                        Novo Ingrediente
                    </button>
                </div>

                <div class="filters-bar">
                    <div class="filter-group">
                        <label>Categoria:</label>
                        <select id="filtroCategoria">
                            <option value="">Todas</option>
                            <option value="Queijos">Queijos</option>
                            <option value="Carnes">Carnes</option>
                            <option value="Vegetais">Vegetais</option>
                            <option value="Molhos">Molhos</option>
                            <option value="Massas">Massas</option>
                            <option value="Temperos">Temperos</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Buscar:</label>
                        <input type="text" id="buscaIngrediente" placeholder="Nome do ingrediente...">
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table" id="ingredientesTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome</th>
                                <th>Categoria</th>
                                <th>Unidade</th>
                                <th>Preço Compra</th>
                                <th>Custo/g</th>
                                <th>Fornecedor</th>
                                <th>Estoque</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Dados serão carregados via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Receitas Section -->
            <section id="receitas-section" class="content-section">
                <div class="section-header">
                    <h2>
                        <i class="fas fa-book"></i>
                        Receitas Base
                    </h2>
                    <button class="btn-primary" id="addReceitaBtn">
                        <i class="fas fa-plus"></i>
                        Nova Receita
                    </button>
                </div>

                <div class="cards-grid">
                    <div class="recipe-card">
                        <div class="recipe-header">
                            <h3>Massas</h3>
                            <span class="recipe-count">3 receitas</span>
                        </div>
                        <div class="recipe-list" id="massasList">
                            <!-- Receitas de massa serão carregadas aqui -->
                        </div>
                    </div>

                    <div class="recipe-card">
                        <div class="recipe-header">
                            <h3>Molhos</h3>
                            <span class="recipe-count">2 receitas</span>
                        </div>
                        <div class="recipe-list" id="molhosList">
                            <!-- Receitas de molho serão carregadas aqui -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pizzas Section -->
            <section id="pizzas-section" class="content-section">
                <div class="section-header">
                    <h2>
                        <i class="fas fa-pizza-slice"></i>
                        Cardápio de Pizzas
                    </h2>
                    <button class="btn-primary" id="addPizzaBtn">
                        <i class="fas fa-plus"></i>
                        Nova Pizza
                    </button>
                </div>

                <div class="pizza-grid" id="pizzaGrid">
                    <!-- Cards de pizza serão carregados aqui -->
                </div>
            </section>

            <!-- Custos Fixos Section -->
            <section id="custos-fixos-section" class="content-section">
                <div class="section-header">
                    <h2>
                        <i class="fas fa-building"></i>
                        Custos Fixos Mensais
                    </h2>
                    <button class="btn-primary" id="addCustoFixoBtn">
                        <i class="fas fa-plus"></i>
                        Novo Custo
                    </button>
                </div>

                <div class="cost-summary">
                    <div class="cost-card">
                        <h3>Total Mensal</h3>
                        <span class="cost-value" id="totalCustosFixos">R$ 0,00</span>
                    </div>
                    <div class="cost-card">
                        <h3>Por Pizza</h3>
                        <span class="cost-value" id="custoFixoPorPizza">R$ 0,00</span>
                    </div>
                    <div class="cost-card">
                        <h3>Vendas Previstas</h3>
                        <span class="cost-value" id="vendasPrevistas">0</span>
                    </div>
                </div>

                <div class="table-container">
                    <table class="data-table" id="custosFixosTable">
                        <thead>
                            <tr>
                                <th>Categoria</th>
                                <th>Valor Mensal</th>
                                <th>% do Total</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Dados serão carregados via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Custos Variáveis Section -->
            <section id="custos-variaveis-section" class="content-section">
                <div class="section-header">
                    <h2>
                        <i class="fas fa-chart-line"></i>
                        Custos Variáveis por Pizza
                    </h2>
                    <button class="btn-primary" id="addCustoVariavelBtn">
                        <i class="fas fa-plus"></i>
                        Novo Item
                    </button>
                </div>

                <div class="table-container">
                    <table class="data-table" id="custosVariaveisTable">
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th>Tipo</th>
                                <th>P</th>
                                <th>M</th>
                                <th>G</th>
                                <th>GG</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Dados serão carregados via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Impostos Section -->
            <section id="impostos-section" class="content-section">
                <div class="section-header">
                    <h2>
                        <i class="fas fa-percentage"></i>
                        Impostos e Taxas por Canal
                    </h2>
                    <button class="btn-primary" id="addImpostoBtn">
                        <i class="fas fa-plus"></i>
                        Novo Canal
                    </button>
                </div>

                <div class="table-container">
                    <table class="data-table" id="impostosTable">
                        <thead>
                            <tr>
                                <th>Canal de Venda</th>
                                <th>Imposto (%)</th>
                                <th>Taxa Cartão (%)</th>
                                <th>Taxa App (%)</th>
                                <th>Entrega (R$)</th>
                                <th>Total (%)</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Dados serão carregados via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Preços Section -->
            <section id="precos-section" class="content-section">
                <div class="section-header">
                    <h2>
                        <i class="fas fa-tags"></i>
                        Preços Finais por Canal
                    </h2>
                    <div class="header-controls">
                        <select id="canalPrecos">
                            <option value="Balcão">Balcão</option>
                            <option value="Delivery">Delivery</option>
                            <option value="iFood">iFood</option>
                            <option value="Rappi">Rappi</option>
                            <option value="Uber Eats">Uber Eats</option>
                        </select>
                        <button class="btn-secondary" id="exportPrecosBtn">
                            <i class="fas fa-download"></i>
                            Exportar
                        </button>
                    </div>
                </div>

                <div class="pricing-grid" id="pricingGrid">
                    <!-- Cards de preços serão carregados aqui -->
                </div>
            </section>

            <!-- Simulador Section -->
            <section id="simulador-section" class="content-section">
                <div class="section-header">
                    <h2>
                        <i class="fas fa-calculator"></i>
                        Simulador de Preços
                    </h2>
                </div>

                <div class="simulator-container">
                    <div class="simulator-inputs">
                        <div class="input-group">
                            <label>Pizza:</label>
                            <select id="simuladorPizza">
                                <option value="">Selecione uma pizza</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Tamanho:</label>
                            <select id="simuladorTamanho">
                                <option value="P">P</option>
                                <option value="M">M</option>
                                <option value="G">G</option>
                                <option value="GG">GG</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Canal:</label>
                            <select id="simuladorCanal">
                                <option value="Balcão">Balcão</option>
                                <option value="Delivery">Delivery</option>
                                <option value="iFood">iFood</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label>Margem Desejada (%):</label>
                            <input type="number" id="simuladorMargem" value="35" min="0" max="100">
                        </div>
                    </div>

                    <div class="simulator-results" id="simulatorResults">
                        <!-- Resultados da simulação -->
                    </div>
                </div>
            </section>

            <!-- Dashboard Section -->
            <section id="dashboard-section" class="content-section">
                <div class="section-header">
                    <h2>
                        <i class="fas fa-chart-pie"></i>
                        Dashboard Analítico
                    </h2>
                    <div class="header-controls">
                        <select id="periodoDashboard">
                            <option value="mes">Este Mês</option>
                            <option value="trimestre">Trimestre</option>
                            <option value="ano">Ano</option>
                        </select>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Margem Média</h3>
                        <div class="metric-value">32.5%</div>
                        <div class="metric-trend positive">+2.3%</div>
                    </div>
                    <div class="dashboard-card">
                        <h3>CMV Médio</h3>
                        <div class="metric-value">28.7%</div>
                        <div class="metric-trend negative">+1.2%</div>
                    </div>
                    <div class="dashboard-card">
                        <h3>Ticket Médio</h3>
                        <div class="metric-value">R$ 42,30</div>
                        <div class="metric-trend positive">+5.1%</div>
                    </div>
                    <div class="dashboard-card">
                        <h3>Top Pizza</h3>
                        <div class="metric-value">Mussarela</div>
                        <div class="metric-trend">35% vendas</div>
                    </div>
                </div>

                <div class="charts-container">
                    <div class="chart-card">
                        <h3>Distribuição de Custos</h3>
                        <canvas id="custosChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <h3>Margem por Pizza</h3>
                        <canvas id="margemChart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Relatórios Section -->
            <section id="relatorios-section" class="content-section">
                <div class="section-header">
                    <h2>
                        <i class="fas fa-file-alt"></i>
                        Relatórios Gerenciais
                    </h2>
                </div>

                <div class="reports-grid">
                    <div class="report-card">
                        <i class="fas fa-chart-bar"></i>
                        <h3>Análise de Custos</h3>
                        <p>Relatório detalhado de todos os custos por categoria</p>
                        <button class="btn-secondary">Gerar Relatório</button>
                    </div>
                    <div class="report-card">
                        <i class="fas fa-pizza-slice"></i>
                        <h3>Ranking de Pizzas</h3>
                        <p>Pizzas mais e menos lucrativas do cardápio</p>
                        <button class="btn-secondary">Gerar Relatório</button>
                    </div>
                    <div class="report-card">
                        <i class="fas fa-trending-up"></i>
                        <h3>Evolução de Preços</h3>
                        <p>Histórico de variação de preços dos ingredientes</p>
                        <button class="btn-secondary">Gerar Relatório</button>
                    </div>
                    <div class="report-card">
                        <i class="fas fa-balance-scale"></i>
                        <h3>Ponto de Equilíbrio</h3>
                        <p>Análise do ponto de equilíbrio por pizza e geral</p>
                        <button class="btn-secondary">Gerar Relatório</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <!-- Modal Ingrediente -->
    <div id="ingredienteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="ingredienteModalTitle">Novo Ingrediente</h3>
                <button class="modal-close">&times;</button>
            </div>
            <form id="ingredienteForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Nome *</label>
                        <input type="text" id="ingredienteNome" name="ingredienteNome" required>
                    </div>
                    <div class="form-group">
                        <label>Categoria *</label>
                        <select id="ingredienteCategoria" name="ingredienteCategoria" required>
                            <option value="">Selecione</option>
                            <option value="Queijos">Queijos</option>
                            <option value="Carnes">Carnes</option>
                            <option value="Vegetais">Vegetais</option>
                            <option value="Molhos">Molhos</option>
                            <option value="Massas">Massas</option>
                            <option value="Temperos">Temperos</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Unidade de Compra *</label>
                        <select id="ingredienteUnidade" name="ingredienteUnidade" required>
                            <option value="">Selecione</option>
                            <option value="kg">kg</option>
                            <option value="g">g</option>
                            <option value="L">L</option>
                            <option value="ml">ml</option>
                            <option value="unidade">unidade</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Quantidade Compra *</label>
                        <input type="number" id="ingredienteQuantidade" name="ingredienteQuantidade" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>Preço Compra (R$) *</label>
                        <input type="number" id="ingredientePreco" name="ingredientePreco" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label>Rendimento (%) *</label>
                        <input type="number" id="ingredienteRendimento" name="ingredienteRendimento" value="100" min="1" max="100" required>
                    </div>
                    <div class="form-group">
                        <label>Fornecedor</label>
                        <input type="text" id="ingredienteFornecedor" name="ingredienteFornecedor">
                    </div>
                    <div class="form-group">
                        <label>Estoque Mínimo</label>
                        <input type="number" id="ingredienteEstoque" name="ingredienteEstoque" step="0.01">
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancelarIngrediente">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Pizza -->
    <div id="pizzaModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="pizzaModalTitle">Nova Pizza</h3>
                <button class="modal-close">&times;</button>
            </div>
            <form id="pizzaForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Nome da Pizza *</label>
                        <input type="text" id="pizzaNome" required>
                    </div>
                    <div class="form-group">
                        <label>Categoria *</label>
                        <select id="pizzaCategoria" required>
                            <option value="">Selecione</option>
                            <option value="Tradicional">Tradicional</option>
                            <option value="Especial">Especial</option>
                            <option value="Premium">Premium</option>
                            <option value="Doce">Doce</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Massa *</label>
                        <select id="pizzaMassa" required>
                            <option value="">Selecione</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Molho *</label>
                        <select id="pizzaMolho" required>
                            <option value="">Selecione</option>
                        </select>
                    </div>
                </div>

                <div class="recheios-section">
                    <h4>Recheios</h4>
                    <div class="recheios-header">
                        <button type="button" class="btn-secondary" id="addRecheioBtn">
                            <i class="fas fa-plus"></i>
                            Adicionar Recheio
                        </button>
                    </div>
                    <div class="recheios-list" id="recheiosList">
                        <!-- Recheios serão adicionados dinamicamente -->
                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancelarPizza">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="toast" class="toast">
        <div class="toast-content">
            <i class="toast-icon"></i>
            <span class="toast-message"></span>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="src/config.js"></script>
    <script src="src/google-config.js"></script>
    <script src="src/api.js"></script>
    <script src="src/utils.js"></script>
    <script src="src/components.js"></script>
    <script src="src/app.js"></script>
</body>
</html>
